
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">

        
        <h1>Welcome to Your Profile</h1>
        <button id="loadProfile">Load Profile</button>
        <pre id="profileData"></pre> <!-- Use <pre> for nicely formatted JSON -->
    </div>
            
            <script>
                document.getElementById("loadProfile").addEventListener("click", async () => {
            const token = localStorage.getItem("token");

            if (!token) {
                document.getElementById("profileData").innerText = "❌ No token found. Please log in.";
                return;
            }
            console.log("Token " , token);

            try {
                const res = await fetch("http://localhost:4000/api/profile", {
                    method: "GET",
                    headers: {
                        "Authorization": `Bearer ${token}`,
                        "Content-Type": "application/json"
                    }
                });

                if (res.status === 401) {
                    document.getElementById("profileData").innerText = "❌ Unauthorized. Please log in again.";
                    return;
                }

                const data = await res.json();
                document.getElementById("profileData").innerText = JSON.stringify(data, null, 2);

            } catch (err) {
                console.error(err);
                document.getElementById("profileData").innerText = "❌ Server error!";
            }
        });
    </script>

</body>
</html>
